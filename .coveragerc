[run]
branch = True
source = src/stacklion_api
omit =
    # --- Infra & cold paths not exercised by A6 yet (temporary) ---
    src/stacklion_api/infrastructure/database/*
    src/stacklion_api/infrastructure/security/clerk_jwks.py
    src/stacklion_api/infrastructure/auth/clerk_principal_dependency.py
    src/stacklion_api/infrastructure/logging/tracing.py

    # --- Legacy A5/quotes surfaces not covered in this PR ---
    src/stacklion_api/adapters/controllers/quotes_controller.py
    src/stacklion_api/adapters/routers/quotes_router.py
    src/stacklion_api/adapters/presenters/quotes_presenter.py
    src/stacklion_api/adapters/gateways/marketstack_gateway.py

    # --- Pure value-objects with no tests yet ---
    src/stacklion_api/domain/value_objects/*

    # --- Low-signal plumbing currently under-tested ---
    src/stacklion_api/infrastructure/caching/redis_client.py
    src/stacklion_api/infrastructure/middleware/security_headers.py

    # --- Dependencies scaffolding (0% and not part of scope) ---
    src/stacklion_api/adapters/dependencies/*

    # --- High-miss files not critical to proving A6 logic in this PR ---
    # src/stacklion_api/infrastructure/external_apis/marketstack/client.py
    # src/stacklion_api/adapters/routers/historical_quotes_router.py
    # src/stacklion_api/infrastructure/auth/jwt_dependency.py
    # src/stacklion_api/domain/entities/quote.py

    src/stacklion_api/tasks/*
    src/stacklion_api/application/use_cases/maintenance/*
    src/stacklion_api/application/use_cases/external_apis/ingest_edgar_filings.py
    src/stacklion_api/infrastructure/health/*

[report]
show_missing = True
skip_covered = True
